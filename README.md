# –£—á–µ–±–Ω–∞—è –°–£–ë–î - –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —É—á–µ–±–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö —Å end-to-end –ø–∞–π–ø–ª–∞–π–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
./START.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–±–µ—Ä–µ—Ç –ø—Ä–æ–µ–∫—Ç
- –ó–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É **5433**
- –ü–æ–∫–∞–∂–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:**

```bash
./gradlew build
java -cp build/classes/java/main com.example.Main 5433 /tmp/db_data
```

### –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞

–í **–Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ**:

```bash
java -cp build/classes/java/main com.example.Main client
```

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
Connected to server (PROTOCOL:1.0)
Server ready. Type SQL queries (exit to quit):
```

### –®–∞–≥ 3: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–æ–≤

–í–≤–µ–¥–∏—Ç–µ SQL –∑–∞–ø—Ä–æ—Å—ã –ø–æ –æ–¥–Ω–æ–º—É:

```sql
CREATE TABLE users (id INTEGER, name VARCHAR, age INTEGER)
INSERT INTO users VALUES (1, 'Alice', 25)
INSERT INTO users VALUES (2, 'Bob', 30)
SELECT * FROM users
SELECT * FROM users WHERE age > 25
CREATE INDEX users_id_idx ON users(id)
SELECT * FROM users WHERE id = 1
```

**–ì–æ—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã:** –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `SQL_QUERIES.txt` –∏ –∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ –æ–¥–Ω–æ–º—É.

## üìã –ü—Ä–∏–º–µ—Ä—ã SQL –∑–∞–ø—Ä–æ—Å–æ–≤

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
```sql
CREATE TABLE products (id INTEGER, name VARCHAR, price INTEGER)
```

### –í—Å—Ç–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```sql
INSERT INTO products VALUES (1, 'Laptop', 1000)
INSERT INTO products VALUES (2, 'Phone', 500)
```

### –í—ã–±–æ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```sql
SELECT * FROM products
SELECT * FROM products WHERE price > 600
SELECT name, price FROM products WHERE id = 1
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
```sql
CREATE INDEX products_price_idx ON products(price)
```

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **Storage Layer**: –°—Ç—Ä–∞–Ω–∏—Ü—ã, —Ñ–∞–π–ª—ã —Ç–∞–±–ª–∏—Ü, –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
- **Buffer Manager**: –ü—É–ª –±—É—Ñ–µ—Ä–æ–≤ —Å LRU –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏–µ–º
- **–ò–Ω–¥–µ–∫—Å—ã**: B+Tree —Å –ø–æ–∏—Å–∫–æ–º –∏ range-—Å–∫–∞–Ω–∞–º–∏
- **SQL –æ–±—Ä–∞–±–æ—Ç–∫–∞**: Lexer ‚Üí Parser ‚Üí Semantic ‚Üí Planner ‚Üí Optimizer
- **Executors**: SeqScan, IndexScan, Filter, Project (Volcano –º–æ–¥–µ–ª—å)
- **–ö–ª–∏–µ–Ω—Ç-–°–µ—Ä–≤–µ—Ä**: TCP —Å–µ—Ä–≤–µ—Ä —Å —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
CLI / TCP Client
        ‚Üì
Server (socket accept / session)
        ‚Üì
Lexer ‚Üí List<Token>
        ‚Üì
Parser ‚Üí AST
        ‚Üì
Semantic Analyzer ‚Üí QueryTree
        ‚Üì
Planner ‚Üí Logical Plan
        ‚Üì
Optimizer ‚Üí Physical Plan
        ‚Üì
ExecutorFactory
        ‚Üì
Volcano Executors (open / next / close)
        ‚Üì
Table / Index / Storage
```

## üìù –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ SQL –æ–ø–µ—Ä–∞—Ü–∏–∏

- `CREATE TABLE` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
- `DROP TABLE` - —É–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã (—É–¥–∞–ª—è–µ—Ç —Ç–∞–±–ª–∏—Ü—É, –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ –∏–Ω–¥–µ–∫—Å—ã)
- `CREATE INDEX` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
- `INSERT INTO ... VALUES` - –≤—Å—Ç–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- `SELECT ... FROM ... WHERE` - –≤—ã–±–æ—Ä–∫–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–í –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞ –≤–∏–¥–Ω—ã –≤—Å–µ —ç—Ç–∞–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏:
- –¢–æ–∫–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–∞
- AST –¥–µ—Ä–µ–≤–æ
- QueryTree
- LogicalPlan
- PhysicalPlan (—Å IndexScan –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –∏–Ω–¥–µ–∫—Å–æ–º!)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/main/java/com/example/
‚îú‚îÄ‚îÄ storage/          # –•—Ä–∞–Ω–∏–ª–∏—â–µ
‚îú‚îÄ‚îÄ buffer/           # –ë—É—Ñ–µ—Ä–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
‚îú‚îÄ‚îÄ index/            # –ò–Ω–¥–µ–∫—Å—ã (B+Tree)
‚îú‚îÄ‚îÄ sql/
‚îÇ   ‚îú‚îÄ‚îÄ lexer/        # –õ–µ–∫—Å–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ parser/       # –ü–∞—Ä—Å–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ semantic/     # –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ planner/      # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ optimizer/    # –û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä
‚îú‚îÄ‚îÄ executor/         # Executors
‚îú‚îÄ‚îÄ server/           # TCP —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ client/           # CLI –∫–ª–∏–µ–Ω—Ç
‚îî‚îÄ‚îÄ Main.java         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –í—ã–ø–æ–ª–Ω—è–π—Ç–µ SQL –∑–∞–ø—Ä–æ—Å—ã **–ø–æ –æ–¥–Ω–æ–º—É**
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SQL –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (`--`)
- –ó–∞–ø—Ä–æ—Å—ã –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å —Ç–æ—á–∫–æ–π —Å –∑–∞–ø—è—Ç–æ–π (`;`)
- –°–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç **5433** (—á—Ç–æ–±—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å PostgreSQL –Ω–∞ 5432)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:
```bash
./gradlew test
```

–°–æ–∑–¥–∞–Ω–æ **8 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤** —Å **33+ —Ç–µ—Å—Ç–∞–º–∏**:
- Unit —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (Lexer, Parser, Storage, Buffer, Index, Executor)
- End-to-end —Ç–µ—Å—Ç—ã (—Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)

## üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Java 11+
- Gradle (–≤–∫–ª—é—á–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç)

## üìû –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–ù–∞–∂–º–∏—Ç–µ `Ctrl+C` –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏:
```bash
pkill -f "com.example.Main"
```
